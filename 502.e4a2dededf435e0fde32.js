(self.webpackChunkrattanak2021=self.webpackChunkrattanak2021||[]).push([[502],{2502:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GithubRepoModule:()=>M});var i=n(1116),o=n(3464),r=n(5959),s=n(878),a=n(3080),l=n(7727),c=n(1450),u=n(1520),g=n(5366),p=n(8512),h=n(4698);const f={userInfo:{name:"",login:"",avatar_url:"",html_url:"",followers:0,following:0},repoList:[],repoListLoading:!1,selectedRepo:null},d={searchQuery:"",selectedRepo:"",sort:"",pagination:{page:1,pageSize:10,pageSizeOptions:[5,10,20,30,50],total:0}};let m=(()=>{class e{constructor(){this._actionSubject=new p.X(d),this.actionState$=this._actionSubject.asObservable().pipe((0,h.T)(1)),this._githubSubject=new p.X(f),this.vm$=this._githubSubject.asObservable().pipe((0,h.T)(1))}get actionState(){return this._actionSubject.getValue()}resetState(){this.setState(d)}setState(e){this._actionSubject.next(Object.assign(Object.assign({},this.actionState),e))}setState2(e){this._githubSubject.next(Object.assign(Object.assign({},this._githubSubject.getValue()),e))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Z=n(1225),b=n(3835),x=n(9996),v=n(1055),_=n(2693);let A=(()=>{class e{constructor(e){this.httpClient=e,this.BASE_URI="https://api.github.com/users",this.URLs={user_url:"",repos_url:()=>this.BASE_URI}}getUserInfo(e){return e?this.httpClient.get(`${this.BASE_URI}/${e}`).pipe((0,b.h)(e=>null!=e),(0,x.U)(e=>{const{name:t,login:n,followers:i,following:o,avatar_url:r,html_url:s}=e;return{name:t,login:n,followers:i,following:o,avatar_url:r,html_url:s}}),(0,l.K)(this.handleError)):(console.log("a username must be provided"),(0,s.of)(null))}getReposInfo(e){return e?this.httpClient.get(`${this.BASE_URI}/${e}/repos?sort=updated`).pipe((0,b.h)(e=>null!=e),(0,l.K)(this.handleError)):(console.log("a username must be provided"),(0,s.of)(null))}getReadmeFileURL(e,t){return console.log("get readme file: "),(0,s.of)("https://raw.githubusercontent.com/rattanakchea/rattanakchea.github.io/master/README.md").pipe((0,v.B)())}handleError(e){let t="";switch(e.status){case 404:t=`Not Found: ${e.message}`;break;case 403:t=`Access Denied: ${e.message}`;break;case 500:t=`Internal Server Error: ${e.message}`;break;default:t=`Unknown Server Error: ${e.message}`}return(0,Z._)(t)}}return e.\u0275fac=function(t){return new(t||e)(g.LFG(_.eN))},e.\u0275prov=g.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var w=n(1041),S=n(523);function q(e,t){if(1&e){const e=g.EpF();g.TgZ(0,"li",3),g.TgZ(1,"a"),g.TgZ(2,"span"),g._uU(3),g.qZA(),g.qZA(),g.TgZ(4,"span",4),g.TgZ(5,"button",5),g.NdJ("click",function(){const t=g.CHM(e).$implicit;return g.oxw(2).selectRepo(t)}),g._uU(6,"View"),g.qZA(),g.qZA(),g.qZA()}if(2&e){const e=t.$implicit;g.xp6(3),g.hij(" ",e.name||""," ")}}function I(e,t){if(1&e&&(g.TgZ(0,"ul",1),g.YNc(1,q,7,1,"li",2),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.data.repoList)}}let T=(()=>{class e{constructor(e){this.GithubFacadeService=e,this.data=null}ngOnInit(){}selectRepo(e){console.log(e),this.GithubFacadeService.setState2({selectedRepo:e})}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-github-repo-list"]],inputs:{data:"data"},decls:1,vars:1,consts:[["class","nav nav-pills flex-column mb-auto",4,"ngIf"],[1,"nav","nav-pills","flex-column","mb-auto"],["class","nav-item d-flex justify-content-between lh-lg",4,"ngFor","ngForOf"],[1,"nav-item","d-flex","justify-content-between","lh-lg"],[2,"text-align","right"],["type","button",1,"btn","btn-link",3,"click"]],template:function(e,t){1&e&&g.YNc(0,I,2,1,"ul",0),2&e&&g.Q6J("ngIf",t.data)},directives:[i.O5,i.sg],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1}"]}),e})();var U=n(4812);function y(e,t){1&e&&(g.TgZ(0,"div",12),g.TgZ(1,"span"),g._uU(2," Please wait "),g.qZA(),g._UZ(3,"my-ellipsis"),g.qZA())}function R(e,t){if(1&e&&(g.TgZ(0,"li"),g._uU(1),g.qZA()),2&e){const e=t.$implicit;g.xp6(1),g.Oqu(e)}}function k(e,t){if(1&e&&(g.TgZ(0,"ul",13),g.YNc(1,R,2,1,"li",14),g.qZA()),2&e){const e=g.oxw();g.xp6(1),g.Q6J("ngForOf",e.errorMsg)}}function j(e,t){if(1&e&&(g.TgZ(0,"div",24),g.TgZ(1,"span",25),g._uU(2),g.qZA(),g._UZ(3,"img",26),g.TgZ(4,"a",27),g._uU(5,"Github"),g.qZA(),g.qZA()),2&e){const e=g.oxw().ngIf;g.xp6(2),g.Oqu(e.userInfo.name||e.userInfo.login),g.xp6(1),g.Q6J("src",e.userInfo.avatar_url,g.LSH),g.xp6(1),g.Q6J("href",e.userInfo.html_url,g.LSH)}}function F(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"dl",28),g.TgZ(2,"dt",29),g._uU(3,"Repo Name"),g.qZA(),g.TgZ(4,"dd",30),g._uU(5),g.qZA(),g.TgZ(6,"dt",29),g._uU(7,"description"),g.qZA(),g.TgZ(8,"dd",30),g._uU(9),g.qZA(),g.TgZ(10,"dt",29),g._uU(11,"URL"),g.qZA(),g.TgZ(12,"dd",30),g.TgZ(13,"a",31),g._uU(14),g.qZA(),g.qZA(),g.qZA(),g._UZ(15,"hr"),g.BQk()),2&e){const e=t.$implicit;g.xp6(5),g.Oqu(e.name),g.xp6(4),g.Oqu(e.description),g.xp6(4),g.s9C("href",e.html_url,g.LSH),g.xp6(1),g.Oqu(e.html_url)}}function O(e,t){if(1&e&&(g.ynx(0),g.TgZ(1,"h3",32),g._uU(2,"Readme File"),g.qZA(),g._UZ(3,"app-markdown",33),g.BQk()),2&e){const e=g.oxw().ngIf;g.xp6(3),g.Q6J("login",e.userInfo.login)("repo",e.selectedRepo.name)}}function J(e,t){if(1&e&&(g.TgZ(0,"div",15),g.TgZ(1,"aside",16),g.TgZ(2,"div",17),g.YNc(3,j,6,3,"div",18),g.TgZ(4,"p",19),g.TgZ(5,"span",20),g._uU(6),g.qZA(),g.TgZ(7,"span",20),g._uU(8),g.qZA(),g.qZA(),g.qZA(),g._UZ(9,"hr"),g._UZ(10,"app-github-repo-list",21),g.TgZ(11,"p"),g._uU(12," Built with passion "),g.qZA(),g.qZA(),g.TgZ(13,"main",22),g.TgZ(14,"h3"),g._uU(15,"Repo Detail"),g.qZA(),g.YNc(16,F,16,4,"ng-container",23),g.YNc(17,O,4,2,"ng-container",23),g.qZA(),g.qZA()),2&e){const e=t.ngIf;g.xp6(3),g.Q6J("ngIf",e.userInfo.avatar_url),g.xp6(3),g.hij("Followers: ",e.userInfo.followers,""),g.xp6(2),g.hij("Following: ",null==e.userInfo?null:e.userInfo.following," "),g.xp6(2),g.Q6J("data",e),g.xp6(6),g.Q6J("ngIf",e.selectedRepo),g.xp6(1),g.Q6J("ngIf",e.userInfo.login&&e.selectedRepo.name)}}const $=[{path:"",component:(()=>{class e{constructor(e,t){this.GithubFacadeService=e,this.GithubApiService=t,this.sub=null,this.loading$=new r.xQ,this.vm$=this.GithubFacadeService.vm$,this.errorMsg=[],this.actionState=this.GithubFacadeService.actionState}ngOnInit(){this.GithubFacadeService.actionState$.subscribe(e=>{console.log("subscribed state: ",e),this.errorMsg=[];const t=this.GithubApiService.getUserInfo(e.searchQuery).pipe((0,l.K)(e=>(this.errorMsg.push(e),(0,s.of)(null)))),n=this.GithubApiService.getReposInfo(e.searchQuery).pipe((0,l.K)(e=>(this.errorMsg.push(e),(0,s.of)(null))));var i;(0,a.aj)([t,n]).pipe((i=this.loading$,e=>{return e.pipe((t=()=>i.next(!0),e=>(0,c.P)(()=>(t(),e))),(0,u.x)(()=>i.next(!1)));var t})).subscribe(([e,t])=>{console.log(t),e&&t&&this.GithubFacadeService.setState2({userInfo:e,repoList:t,selectedRepo:t.length>0?t[0]:{}})})})}onSubmit(e){console.log("state: ",e),this.GithubFacadeService.setState(e)}getReadmeURI(e,t){return`https://raw.githubusercontent.com/${e}/${t}/master/README.md`}}return e.\u0275fac=function(t){return new(t||e)(g.Y36(m),g.Y36(A))},e.\u0275cmp=g.Xpm({type:e,selectors:[["app-github-repo-home"]],decls:18,vars:8,consts:[[1,"container-fluid","text-center","p-3","mb-3"],["novalidate","",3,"ngSubmit"],[1,"form-group","d-flex","gap-2","justify-content-center"],[1,"col-form-label"],[1,""],["type","text","id","exampleInputEmail1","aria-describedby","emailHelp","placeholder","Enter a repo user","name","repo",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary"],["class","d-flex justify-content-center",4,"ngIf"],["class","text-warning text-center",4,"ngIf"],["class","content d-flex flex-grow-1 align-items-stretch",4,"ngIf"],[1,"container","text-muted","mt-auto"],["href","https://docs.github.com/en/rest/overview/resources-in-the-rest-api#rate-limiting"],[1,"d-flex","justify-content-center"],[1,"text-warning","text-center"],[4,"ngFor","ngForOf"],[1,"content","d-flex","flex-grow-1","align-items-stretch"],[1,"flex-column","flex-shrink-0","p-3","bg-light",2,"width","30%","min-width","250px"],[1,"d-flex","flex-column","mb-3","mb-md-0","link-dark","text-decoration-none","w-100"],["class","text-center d-flex align-items-center",4,"ngIf"],[1,"d-flex","w-100"],[1,"flex-grow-1"],[1,"flex-column","flex-grow-1","mb-auto",3,"data"],[1,"flex-grow-1","overflow-auto","p-3"],[4,"ngIf"],[1,"text-center","d-flex","align-items-center"],[1,"fs-4"],["alt","avatar","width","30px",1,"rounded",3,"src"],["target","_blank",1,"ms-auto",3,"href"],[1,"row"],[1,"col-sm-3"],[1,"col-sm-9"],["target","_blank",3,"href"],[1,"text-primary"],[3,"login","repo"]],template:function(e,t){1&e&&(g.TgZ(0,"div",0),g.TgZ(1,"form",1),g.NdJ("ngSubmit",function(){return t.onSubmit(t.actionState)}),g.TgZ(2,"div",2),g.TgZ(3,"label",3),g._uU(4,"Github Repo User"),g.qZA(),g.TgZ(5,"div",4),g.TgZ(6,"input",5),g.NdJ("ngModelChange",function(e){return t.actionState.searchQuery=e}),g.qZA(),g.qZA(),g.TgZ(7,"button",6),g._uU(8,"Search"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g.YNc(9,y,4,0,"div",7),g.ALo(10,"async"),g.YNc(11,k,2,1,"ul",8),g.YNc(12,J,18,6,"div",9),g.ALo(13,"async"),g.TgZ(14,"p",10),g._uU(15,"Github has rate limit for usage their API. This website can make up to 60 requests per hour. For more info, please follow "),g.TgZ(16,"a",11),g._uU(17,"here"),g.qZA(),g.qZA()),2&e&&(g.xp6(6),g.Q6J("ngModel",t.actionState.searchQuery),g.xp6(3),g.Q6J("ngIf",g.lcZ(10,4,t.loading$)),g.xp6(2),g.Q6J("ngIf",t.errorMsg),g.xp6(1),g.Q6J("ngIf",g.lcZ(13,6,t.vm$)))},directives:[w._Y,w.JL,w.F,w.Fj,w.JJ,w.On,i.O5,S.S,i.sg,T,U.l],pipes:[i.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}"]}),e})()}];let Q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[o.Bz.forChild($)],o.Bz]}),e})();var E=n(4914),G=n(1111);let M=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.oAB({type:e}),e.\u0275inj=g.cJS({imports:[[i.ez,Q,w.u5,E.m,G.JP.forRoot()]]}),e})()}}]);